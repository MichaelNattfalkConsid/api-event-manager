ImportEvents=ImportEvents||{},ImportEvents.Admin=ImportEvents.Admin||{},ImportEvents.Admin.AcceptDeny=function(e){function t(){e(function(){this.handleEvents()}.bind(this))}return t.prototype.changeAccepted=function(t,n){e.ajax({url:eventmanager.ajaxurl,type:"post",data:{action:"accept_or_deny",value:t,postId:n},beforeSend:function(a){var i=e("#post-"+n);1===t?(i.find(".deny").removeClass("hidden"),i.find(".accept").addClass("hidden")):0===t&&(i.find(".deny").addClass("hidden"),i.find(".accept").removeClass("hidden"))}})},t.prototype.handleEvents=function(){e(document).on("click",".accept",function(t){t.preventDefault();var n=e(t.target).closest(".accept").attr("post-id");this.changeAccepted(1,n)}.bind(this)),e(document).on("click",".deny",function(t){t.preventDefault();var n=e(t.target).closest(".deny").attr("post-id");this.changeAccepted(0,n)}.bind(this))},new t}(jQuery),function(e){"undefined"!=typeof acf&&(acf.add_filter("date_time_picker_args",function(e,t){return e.timeOnlyTitle=eventmanager.choose_time,e.timeText=eventmanager.time,e.hourText=eventmanager.hour,e.minuteText=eventmanager.minute,e.closeText=eventmanager.done,e.currentText=eventmanager.now,e.showSecond=!1,e}),acf.add_filter("time_picker_args",function(e,t){return e.timeOnlyTitle=eventmanager.choose_time,e.timeText=eventmanager.time,e.hourText=eventmanager.hour,e.minuteText=eventmanager.minute,e.closeText=eventmanager.done,e.currentText=eventmanager.now,e.showSecond=!1,e}),acf.add_filter("google_map_marker_args",function(e,t){return e.draggable=!1,e.raiseOnDrag=!1,e}),acf.add_filter("validation_complete",function(t,n){if(e(".acf-tab-error",n).remove(),t.errors)for(var a=0;a<t.errors.length;a++){var i=e('[name="'+t.errors[a].input+'"]',n).parents(".acf-field");i=i[i.length-1];var r=e(i,n).prevAll(".acf-field-tab").attr("data-key");e(".acf-tab-wrap a[data-key="+r+"] .acf-tab-error",n).remove(),e(".acf-tab-wrap a[data-key="+r+"]",n).append(' <span class="dashicons dashicons-warning acf-tab-error"></span>').click()}return t}))}(jQuery),ImportEvents=ImportEvents||{},ImportEvents.Admin=ImportEvents.Admin||{},ImportEvents.Admin.Fields=function(e){function t(){e(document).ready(function(){this.syncCheckBox(),this.mainOrganizerCheckBox(),this.locationGmaps(),this.eventDatepickerRange(),this.eventDateExceptions(),this.duplicateOccasion(),e(".acf-button").removeClass("button-primary"),e(".acf-gallery-add").text(eventmanager.add_images)}.bind(this))}return t.prototype.duplicateOccasion=function(){e(".acf-field-57611277ef032").each(function(){e(this).after('<div class="acf-field"><a href="#" class="duplicateOccasion button">'+eventmanager.duplicate_occasion+"</a></div>")}),e(document).on("click",".duplicateOccasion",function(t){t.preventDefault(),e('a[data-event="add-row"]',".acf-field-5761106783967").last().trigger("click");var n=e(t.target).closest(".acf-row"),a=e('div[data-name="start_date"] .hasDatepicker',n).val(),i=e('div[data-name="end_date"] .hasDatepicker',n).val(),r=e('div[data-name="door_time"] .hasDatepicker',n).val(),o=e('div[data-name="status"] input:checked',n).val(),s=e('div[data-name="occ_exeption_information"] input',n).val(),d=e('div[data-name="content_mode"] input:checked',n).val(),c=e('textarea[class="wp-editor-area"]',n).attr("id"),p="";"undefined"!=typeof tinyMCE&&(p=tinymce.get(c).getContent()),setTimeout(function(){var t=e('[data-name="occasions"] table tbody').children("tr.acf-row:not(.acf-clone)").last(),n=e('textarea[class="wp-editor-area"]',t).attr("id");e('div[data-name="start_date"]',t).find(".hasDatepicker, .input-alt").val(a),e('div[data-name="end_date"]',t).find(".hasDatepicker, .input-alt").val(i),e('div[data-name="door_time"]',t).find(".hasDatepicker, .input-alt").val(r),e('input[value="'+o+'"]',t).attr("checked","checked").trigger("change"),e('div[data-name="occ_exeption_information"] input',t).val(s),e('input[value="'+d+'"]',t).attr("checked","checked").trigger("change"),"undefined"!=typeof tinyMCE&&tinymce.get(n).setContent(p)},0)})},t.prototype.syncCheckBox=function(){e('#sync-meta-box input[type="checkbox"]').on("change",function(){return e('#sync-meta-box input[type="checkbox"]').is(":checked")?(e("body").addClass("no-sync"),void e(this).parent().addClass("check_active")):(e("body").removeClass("no-sync"),void e(this).parent().removeClass("check_active"))}).trigger("change")},t.prototype.mainOrganizerCheckBox=function(){e('.acf-field[data-name="main_organizer"] input[type="checkbox"]').each(function(t,n){e(this).prop("checked")&&e('.acf-field[data-name="main_organizer"]').not(e(this).closest('.acf-field[data-name="main_organizer"]')).addClass("main_organizer_hidden")}),e(document).on("click",'.acf-field[data-name="main_organizer"] input[type="checkbox"]',function(){e(this).prop("checked")?e('.acf-field[data-name="main_organizer"]').not(e(this).closest('.acf-field[data-name="main_organizer"]')).addClass("main_organizer_hidden"):e('.acf-field[data-name="main_organizer"]').removeClass("main_organizer_hidden")})},t.prototype.locationGmaps=function(){e('.acf-field[data-name="geo_map"] .acf-hidden').each(function(t,n){var a=e(this).find(".input-address").attr("value"),i=e(this).find(".input-lat").attr("value"),r=e(this).find(".input-lng").attr("value");a&&i&&r||e('.acf-field[data-name="geo_map"]').hide()})},t.prototype.eventDatepickerRange=function(){e.datepicker.setDefaults({minDate:"now",maxDate:(new Date).getDate()+365}),e(document).on("click",".acf-field-576110e583969 .hasDatepicker, .acf-field-5761169e07309 .hasDatepicker",function(){var t=e(this).parentsUntil(".acf-fields").siblings(".start_date").find(".hasDatepicker").val();if(t){var n=t.split(/[ ]+/),a=n[0].split(/[-]+/),i=a[1]-1;if(t=new Date(a[0],i,a[2],0,0,0),"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t.getTime())){var r=t.getFullYear(),o=t.getMonth(),s=t.getDate();if(e(this).parents('[data-name="end_date"]').length){var d=new Date(r+1,o,s);e(this).datetimepicker("option",{minDate:t,maxDate:d,defaultDate:t})}if(e(this).parents('[data-name="door_time"]').length){var c=new Date(r-1,o,s);e(this).datetimepicker("option",{minDate:c,maxDate:t,defaultDate:t})}e(this).datetimepicker("show")}}})},t.prototype.eventDateExceptions=function(){e(document).on("click",".acf-field-57d279f8db0cc .hasDatepicker",function(t){$this=e(t.target).closest(".hasDatepicker"),$this.datepicker("option","dateFormat","yy-mm-dd");var n=$this.parents(".acf-field-repeater").siblings('[data-name="rcr_week_day"]').find("select").val(),a=$this.parents(".acf-field-repeater").siblings('[data-name="rcr_start_date"]').find(".hasDatepicker").val(),i=$this.parents(".acf-field-repeater").siblings('[data-name="rcr_end_date"]').find(".hasDatepicker").val(),r=$this.parents(".acf-field-repeater").siblings('[data-name="rcr_weekly_interval"]').find('input[type="number"]').val();if(r=null!=r?parseInt(r):1,$this.datepicker("option","defaultDate",a),a&&i){for(var o=this.getClosestDay(new Date(a),this.weekdayNumber(n)),s=new Date(i),d=[],c=new Date(o);c<=s;c.setDate(c.getDate()+7*r))d.push(this.formattedDate(new Date(c)));var p=function(e){var t=jQuery.datepicker.formatDate("yy-mm-dd",e);return[d.indexOf(t)!=-1]};$this.datepicker("option","beforeShowDay",p)}$this.datepicker({showOn:"focus"}).focus()}.bind(this))},t.prototype.getClosestDay=function(e,t){var n=new Date(e.getTime());return n.setDate(e.getDate()+(7+t-e.getDay())%7),n},t.prototype.formattedDate=function(e){var t=("0"+e.getDate()).slice(-2),n=("0"+(e.getMonth()+1)).slice(-2),a=e.getFullYear();return a+"-"+n+"-"+t},t.prototype.weekdayNumber=function(e){var t=[];return t.monday=1,t.tuesday=2,t.wednesday=3,t.thursday=4,t.friday=5,t.saturday=6,t.sunday=7,"undefined"!=typeof t[e.toLowerCase()]?t[e.toLowerCase()]:0},new t}(jQuery),ImportEvents=ImportEvents||{},ImportEvents.Admin=ImportEvents.Admin||{},ImportEvents.Admin.Guide=function(e){function t(){e(document).ready(function(){"guide"===pagenow&&(this.onlySublocations(),e(document).on("click",'.acf-tab-button[data-key="field_58ab0c6354b09"]',function(){this.populateBeaconObjects()}.bind(this)),e(document).on("click",'[data-name="guide_beacon"] [data-event="add-row"]',function(){setTimeout(function(){var t=e('[data-name="guide_beacon"] .acf-row:not(.acf-clone)').last(),n=t.find('[data-name="objects"] .acf-input input');n.select2("destroy"),n.select2({data:this.getObjects(),multiple:!0})}.bind(this),1)}.bind(this)))}.bind(this))}return t.prototype.onlySublocations=function(){acf.add_filter("select2_ajax_data",function(t,n,a,i){if("field_58ab0c9554b0a"!==t.field_key)return t;var r="acf-field_589dd138aca7e-input",o=e("#"+r).val();return o&&(t.selectedGroup=o),t})},t.prototype.populateBeaconObjects=function(){e('[data-name="objects"] select ~ input[type="hidden"]').each(function(t,n){e(n).select2("destroy"),e(n).select2({data:this.getObjects(),multiple:!0})}.bind(this))},t.prototype.getObjects=function(){var t=[];return e('[data-name="guide_content_objects"] table tbody').first().children("tr.acf-row:not(.acf-clone)").each(function(n,a){var i=e(a),r=i.find('[data-name="guide_object_uid"] input').val(),o=i.find('[data-name="guide_object_title"] input').val();r||(r=(new Date).valueOf(),i.find('[data-name="guide_object_uid"] input').val(r)),t.push({id:r,text:o})}),t},new t}(jQuery);var ImportEvents=ImportEvents||{};ImportEvents=ImportEvents||{},ImportEvents.Admin=ImportEvents.Admin||{},ImportEvents.Admin.Import=function(e){function t(){e(function(){this.handleEvents()}.bind(this))}return t.prototype.handleEvents=function(){e(document).on("click",".single-import",function(t){t.preventDefault(),e(this).prop("disabled",!0).text(eventmanager.import_scheduled),e.ajax({url:eventmanager.ajaxurl,type:"post",data:{action:"schedule_single_import",client:this.dataset.client}})})},new t}(jQuery),ImportEvents=ImportEvents||{},ImportEvents.Admin=ImportEvents.Admin||{},ImportEvents.Admin.MediaApprove=function(e){function t(){e(function(){var t=e("div#postimagediv > .inside");"event"!==pagenow||t.find("img").length>0||(this.addCheckBoxes(t),this.handleEvents(t))}.bind(this))}return t.prototype.addCheckBoxes=function(t){t.children().hide(),e(".acf-gallery-add").attr("disabled",!0).prop("disabled",!0);var n='<div id="image-approve"><p><strong>'+eventmanager.confirm_statements+"</strong></p>";n+='<input type="checkbox" name="approve" id="first-approve" value="1">',n+="<span> "+eventmanager.promote_event+"</span>",n+="<p>"+eventmanager.identifiable_persons+"</p>",n+='<p><input type="radio" name="approve" value="1">'+eventmanager.yes+' <input type="radio" name="approve" value="0">'+eventmanager.no+"</p>",n+='<div id="persons-approve" class="hidden"><input type="checkbox" name="approve" id="second-approve" value="1">',n+="<span> "+eventmanager.persons_approve+"</span></div></div>",t.append(n)},t.prototype.handleEvents=function(t){e("input:radio[name=approve]").change(function(){1==this.value?e("#persons-approve").removeClass("hidden"):e("#persons-approve").addClass("hidden")}),e("input[name=approve]").change(function(){var n=e("input:checkbox[id=first-approve]:checked").length>0,a=e("input:radio[name=approve]:checked").val(),i=e("input:checkbox[id=second-approve]:checked").length>0;(n&&0==a||n&&i)&&(e("#image-approve").remove(),t.find(":hidden").fadeIn(),e(".acf-gallery-add").attr("disabled",!1).prop("disabled",!1))})},new t}(jQuery),ImportEvents=ImportEvents||{},ImportEvents.Admin=ImportEvents.Admin||{},ImportEvents.Admin.RestrictDatePicker=function(e){function t(){"edit-event"===pagenow&&this.init()}return t.prototype.init=function(){e(document).ready(function(){var t=e('input[name="restrictDateFrom"]'),n=e('input[name="restrictDateTo"]');t.datepicker({dateFormat:"dd-mm-yy"}),n.datepicker({dateFormat:"dd-mm-yy"}),t.on("change",function(){n.datepicker("option","minDate",t.val())}),n.on("change",function(){t.datepicker("option","maxDate",n.val())})})},new t}(jQuery),ImportEvents=ImportEvents||{},ImportEvents.Admin=ImportEvents.Admin||{},ImportEvents.Admin.Suggestions=function(e){function t(){r.indexOf(pagenow)<0||(this.switchName(),e(document).on("keyup",'input[name="post_title"]',function(t){var a=e(t.target);clearTimeout(n),n=setTimeout(function(){this.search(a.val())}.bind(this),300)}.bind(this)),e(document).on("click",'[data-action="suggestions-close"]',function(e){e.preventDefault(),this.dismiss()}.bind(this)))}var n,a,i,r=["organizer","location","event","sponsor","package","membership-card","guide"];return t.prototype.search=function(t){if(t.length<=3||t===a)return!1;a=t;var n=eventmanager.wpapiurl+"/wp/v2/"+pagenow+"?search="+t;"event"===pagenow&&(n=eventmanager.wpapiurl+"/wp/v2/"+pagenow+"/search?term="+t),e.get(n,function(e){return e.length?void this.output(e,t):void this.dismiss()}.bind(this),"JSON")},t.prototype.output=function(t,n){var a=e("#title-suggestions");a.length||(a=e('<div id="title-suggestions"></div>'),a.append("<ul></ul>")),a.find("ul").empty(),a.find("ul").append("<li><strong>"+i+':</strong> <button type="button" class="notice-dismiss suggestion-hide" data-action="suggestions-close"></button></li>'),e.each(t,function(e,t){var i="event"===pagenow?t.title:t.title.rendered,r=i.replace("<span>","").replace("</span>"),o=new RegExp("("+n+")","igm"),s=r.replace(o,"<span>$1</span>");a.find("ul").append('<li><a href="'+eventmanager.adminurl+"post.php?post="+t.id+'&action=edit" class="suggestion">'+s+"</a></li>")}),e("#titlewrap").append(a),a.slideDown(200)},t.prototype.dismiss=function(){e("#title-suggestions").slideUp(200,function(){e("#title-suggestions").remove()})},t.prototype.switchName=function(){switch(pagenow){case"organizer":i=eventmanager.organizers+" "+eventmanager.with_similar_name;break;case"location":i=eventmanager.locations+" "+eventmanager.with_similar_name;break;case"sponsor":i=eventmanager.sponsors+" "+eventmanager.with_similar_name;break;case"package":i=eventmanager.packages+" "+eventmanager.with_similar_name;break;case"membership-card":i=eventmanager.membership_cards+" "+eventmanager.with_similar_name;break;case"guide":i=eventmanager.guides+" "+eventmanager.with_similar_name;break;default:i=eventmanager.events+" "+eventmanager.with_similar_name}},new t}(jQuery),ImportEvents=ImportEvents||{},ImportEvents.Admin=ImportEvents.Admin||{},ImportEvents.Admin.Validate=function(e){function t(){e(document).on("click","#publish",function(e){return this.post_title()}.bind(this)),e(document).on("keypress",'input[name="post_title"]',function(e){return 13!=e.which||this.post_title()}.bind(this))}return t.prototype.image=function(){var t=e("body").hasClass("imported");if(!t){var n=e("#postimagediv").find("img");if(!(n.length>0)){var a=eventmanager.require_image;return this.showError("image",a),!1}e(".require-image").remove()}return!0},t.prototype.post_title=function(){var t=e("#title");if(!(t.val().length>0)){var n=eventmanager.require_title;return this.showError("title",n),!1}return e(".require-title").remove(),!0},t.prototype.showError=function(t,n){setTimeout(function(){e("#ajax-loading").css("visibility","hidden")},100),setTimeout(function(){e("#publish").removeClass("button-primary-disabled")},100),e(".require-"+t).length||e("#post").before('<div class="error require-'+t+'"><p>'+n+"</p></div>")},new t}(jQuery),ImportEvents=ImportEvents||{},ImportEvents.Prompt=ImportEvents.Prompt||{},ImportEvents.Prompt.Modal=function(e){function t(){e(function(){this.handleEvents()}.bind(this))}var n=!1;return t.prototype.open=function(t,a){e("body").addClass("lightbox-open").append('            <div id="lightbox">                <div class="lightbox-wrapper">                    <button class="lightbox-close" data-lightbox-action="close">&times; '+eventmanager.close+'</button>                    <iframe class="lightbox-iframe" src="'+t+'" frameborder="0" allowtransparency></iframe>                </div>            </div>        '),"undefined"!=typeof a&&e(".lightbox-iframe").bind("load",function(){var t=e(this).contents().find("#post");t.append('<input type="hidden" id="parentId" name="parentId" value="'+a+'" />')}),n=!0},t.prototype.close=function(){e(".lightbox-iframe");e("body").removeClass("lightbox-open"),e("#lightbox").remove(),n=!1},t.prototype.handleEvents=function(){e(document).on("click",'[data-lightbox-action="close"]',function(e){e.preventDefault(),this.close()}.bind(this))},new t}(jQuery),ImportEvents=ImportEvents||{},ImportEvents.Admin=ImportEvents.Admin||{},ImportEvents.Admin.NewPostModal=function(e){function t(){e(function(){this.createTrigger("location",".acf-field-576117c423a52"),this.createTrigger("organizer",".acf-field-5922a161ab32f"),this.createTrigger("sponsor",".acf-field-57a9d5f3804e1"),this.createTrigger("membership-card",".acf-field-57c7ed92054e6"),this.createTrigger("membership-card",".acf-field-581847f9642dc"),this.bindLaunchModal()}.bind(this))}return t.prototype.createTrigger=function(t,n){e(n).length&&"undefined"!=typeof eventmanager["new_"+t]&&e(n).append('<a class="createNewPost button" href="'+eventmanager.adminurl+"post-new.php?post_type="+t+'&lightbox=true">'+eventmanager["new_"+t]+"</a>")},t.prototype.bindLaunchModal=function(){e(document).on("click",".createNewPost",function(t){t.preventDefault(),ImportEvents.Prompt.Modal.open(e(this).attr("href"),e("#post_ID").val())})},new t}(jQuery),ImportEvents=ImportEvents||{},ImportEvents.Prompt=ImportEvents.Prompt||{},ImportEvents.Prompt.Notice=function(e){function t(){e(document).on("click",".event-guidelines .notice-dismiss",function(e){this.dismissInstructions()}.bind(this))}return t.prototype.dismissInstructions=function(){var t={action:"dismiss"};e.post(ajaxurl,t)},new t}(jQuery);