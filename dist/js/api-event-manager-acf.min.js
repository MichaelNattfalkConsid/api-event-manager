!function(e){acf.add_filter("date_time_picker_args",function(e,t){return e.timeOnlyTitle=eventmanager.choose_time,e.timeText=eventmanager.time,e.hourText=eventmanager.hour,e.minuteText=eventmanager.minute,e.closeText=eventmanager.done,e.currentText=eventmanager.now,e.showSecond=!1,e}),acf.add_filter("time_picker_args",function(e,t){return e.timeOnlyTitle=eventmanager.choose_time,e.timeText=eventmanager.time,e.hourText=eventmanager.hour,e.minuteText=eventmanager.minute,e.closeText=eventmanager.done,e.currentText=eventmanager.now,e.showSecond=!1,e}),acf.add_filter("google_map_marker_args",function(e,t){return e.draggable=!1,e.raiseOnDrag=!1,e}),acf.addFilter("validation_complete",function(t,a){if(e(".acf-tab-error",a).remove(),t.errors)for(var n=0;n<t.errors.length;n++){var i=e('[name="'+t.errors[n].input+'"]',a).parents(".acf-field");i=i[i.length-1];var r=e(i,a).prevAll(".acf-field-tab").attr("data-key");e(".acf-tab-wrap a[data-key="+r+"] .acf-tab-error",a).remove(),e(".acf-tab-wrap a[data-key="+r+"]",a).append(' <span class="dashicons dashicons-warning acf-tab-error"></span>').click()}return t})}(jQuery),ImportEvents=ImportEvents||{},ImportEvents.Admin=ImportEvents.Admin||{},ImportEvents.Admin.Fields=function(e){function t(){e(document).ready(function(){this.syncCheckBox(),this.mainOrganizerCheckBox(),this.locationGmaps(),this.eventDatepickerRange(),this.eventDateExceptions(),this.duplicateOccasion(),e(".acf-button").removeClass("button-primary"),e(".acf-gallery-add").text(eventmanager.add_images)}.bind(this))}return t.prototype.duplicateOccasion=function(){e(".acf-field-5ce6a39f92cb8").each(function(){e(this).after('<div class="acf-field"><a href="#" class="duplicateOccasion button">'+eventmanager.duplicate_occasion+"</a></div>")}),e(document).on("click",".duplicateOccasion",function(t){t.preventDefault(),e('a[data-event="add-row"]',".acf-field-5761106783967").last().trigger("click");var a=e(t.target).closest(".acf-row"),n=e('div[data-name="start_date"] .hasDatepicker',a).val(),i=e('div[data-name="end_date"] .hasDatepicker',a).val(),r=e('div[data-name="door_time"] .hasDatepicker',a).val(),c=e('div[data-name="status"] input:checked',a).val(),o=e('div[data-name="occ_exeption_information"] input',a).val(),d=e('div[data-name="content_mode"] input:checked',a).val(),s=e('textarea[class="wp-editor-area"]',a).attr("id"),l="",f=e('div[data-name="location_mode"] input:checked',a).val(),m=e('div[data-name="location"] select option',a).last();"undefined"!=typeof tinyMCE&&(l=tinymce.get(s).getContent()),setTimeout(function(){var t=e('[data-name="occasions"] table tbody').children("tr.acf-row:not(.acf-clone)").last(),a=e('textarea[class="wp-editor-area"]',t).attr("id");e('div[data-name="start_date"]',t).find(".hasDatepicker, .input-alt").val(n),e('div[data-name="end_date"]',t).find(".hasDatepicker, .input-alt").val(i),e('div[data-name="door_time"]',t).find(".hasDatepicker, .input-alt").val(r),e('input[value="'+c+'"]',t).attr("checked","checked").trigger("change"),e('div[data-name="occ_exeption_information"] input',t).val(o),e('input[value="'+d+'"]',t).attr("checked","checked").trigger("change"),e('input[value="'+f+'"]',t).attr("checked","checked").trigger("change"),e('div[data-name="location"] select',t).select2("trigger","select",{data:{id:parseInt(m.attr("value")),text:m.text()}}),"undefined"!=typeof tinyMCE&&tinymce.get(a).setContent(l)},0)})},t.prototype.syncCheckBox=function(){e('#sync-meta-box input[type="checkbox"]').on("change",function(){return e('#sync-meta-box input[type="checkbox"]').is(":checked")?(e("body").addClass("no-sync"),void e(this).parent().addClass("check_active")):(e("body").removeClass("no-sync"),void e(this).parent().removeClass("check_active"))}).trigger("change")},t.prototype.mainOrganizerCheckBox=function(){e('.acf-field[data-name="main_organizer"] input[type="checkbox"]').each(function(t,a){e(this).prop("checked")&&e('.acf-field[data-name="main_organizer"]').not(e(this).closest('.acf-field[data-name="main_organizer"]')).addClass("main_organizer_hidden")}),e(document).on("click",'.acf-field[data-name="main_organizer"] input[type="checkbox"]',function(){e(this).prop("checked")?e('.acf-field[data-name="main_organizer"]').not(e(this).closest('.acf-field[data-name="main_organizer"]')).addClass("main_organizer_hidden"):e('.acf-field[data-name="main_organizer"]').removeClass("main_organizer_hidden")})},t.prototype.locationGmaps=function(){e('.acf-field[data-name="geo_map"] .acf-hidden').each(function(t,a){var n=e(this).find('[data-name="address"]').val(),i=e(this).find('[data-name="lat"]').val(),r=e(this).find('[data-name="lng"]').val();n&&i&&r||e('.acf-field[data-name="geo_map"]').hide()})},t.prototype.eventDatepickerRange=function(){e.datepicker.setDefaults({minDate:"now",maxDate:(new Date).getDate()+365,dateFormat:"yy-mm-dd"}),e(document).on("click",".acf-field-576110e583969 .hasDatepicker, .acf-field-5761169e07309 .hasDatepicker",function(){var t=e(this).parentsUntil(".acf-fields").siblings(".start_date").find(".hasDatepicker").val();if(t){var a=t.split(/[ ]+/),n=a[0].split(/[-]+/),i=n[1]-1;if(t=new Date(n[0],i,n[2],0,0,0),"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t.getTime())){var r=t.getFullYear(),c=t.getMonth(),o=t.getDate();if(e(this).parents('[data-name="end_date"]').length){var d=new Date(r+1,c,o);e(this).datetimepicker("option",{minDate:t,maxDate:d,defaultDate:t})}if(e(this).parents('[data-name="door_time"]').length){var s=new Date(r-1,c,o);e(this).datetimepicker("option",{minDate:s,maxDate:t,defaultDate:t})}e(this).datetimepicker("show")}}})},t.prototype.eventDateExceptions=function(){e(document).on("click",".acf-field-57d279f8db0cc .hasDatepicker",function(t){$this=e(t.target).closest(".hasDatepicker");var a=$this.parents(".acf-field-repeater").siblings('[data-name="rcr_week_day"]').find("select").val(),n=$this.parents(".acf-field-repeater").siblings('[data-name="rcr_start_date"]').find(".hasDatepicker").val(),i=$this.parents(".acf-field-repeater").siblings('[data-name="rcr_end_date"]').find(".hasDatepicker").val(),r=$this.parents(".acf-field-repeater").siblings('[data-name="rcr_weekly_interval"]').find('input[type="number"]').val();if(r=null!=r?parseInt(r):1,$this.datepicker("option","defaultDate",n),n&&i){for(var c=this.getClosestDay(new Date(n),this.weekdayNumber(a)),o=new Date(i),d=[],s=new Date(c);s<=o;s.setDate(s.getDate()+7*r))d.push(this.formattedDate(new Date(s)));var l=function(e){var t=jQuery.datepicker.formatDate("yy-mm-dd",e);return[d.indexOf(t)!=-1]};$this.datepicker("option","beforeShowDay",l)}$this.datepicker({showOn:"focus"}).focus()}.bind(this))},t.prototype.getClosestDay=function(e,t){var a=new Date(e.getTime());return a.setDate(e.getDate()+(7+t-e.getDay())%7),a},t.prototype.formattedDate=function(e){var t=("0"+e.getDate()).slice(-2),a=("0"+(e.getMonth()+1)).slice(-2),n=e.getFullYear();return n+"-"+a+"-"+t},t.prototype.weekdayNumber=function(e){var t=[];return t.monday=1,t.tuesday=2,t.wednesday=3,t.thursday=4,t.friday=5,t.saturday=6,t.sunday=7,"undefined"!=typeof t[e.toLowerCase()]?t[e.toLowerCase()]:0},new t}(jQuery),ImportEvents=ImportEvents||{},ImportEvents.Admin=ImportEvents.Admin||{},ImportEvents.Admin.Guide=function(e){function t(){e(document).ready(function(){"guide"===pagenow&&(this.onlySublocations(),e(document).on("click",'.acf-tab-button[data-key="field_58ab0c6354b09"]',function(){this.populateBeaconObjects()}.bind(this)),e(document).on("click",'[data-name="guide_beacon"] [data-event="add-row"]',function(){setTimeout(function(){var t=e('[data-name="guide_beacon"] .acf-row:not(.acf-clone)').last(),a=t.find('[data-name="objects"] .acf-input input');a.select2("destroy"),a.select2({data:this.getObjects(),multiple:!0})}.bind(this),1)}.bind(this)))}.bind(this))}return t.prototype.onlySublocations=function(){acf.add_filter("select2_ajax_data",function(t,a,n,i){if("field_58ab0c9554b0a"!==t.field_key)return t;var r="acf-field_589dd138aca7e-input",c=e("#"+r).val();return c&&(t.selectedGroup=c),t})},t.prototype.populateBeaconObjects=function(){e('[data-name="objects"] select ~ input[type="hidden"]').each(function(t,a){e(a).select2("destroy"),e(a).select2({data:this.getObjects(),multiple:!0})}.bind(this))},t.prototype.getObjects=function(){var t=[];return e('[data-name="guide_content_objects"] table tbody').first().children("tr.acf-row:not(.acf-clone)").each(function(a,n){var i=e(n),r=i.find('[data-name="guide_object_uid"] input').val(),c=i.find('[data-name="guide_object_title"] input').val();r||(r=(new Date).valueOf(),i.find('[data-name="guide_object_uid"] input').val(r)),t.push({id:r,text:c})}),t},new t}(jQuery);